import{_ as e,r as i,o as p,c as o,b as n,d as s,e as t,a as c}from"./app-a8d-X_GH.js";const l={},r=n("h1",{id:"无线局域网-wi-fi",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#无线局域网-wi-fi","aria-hidden":"true"},"#"),s(" 无线局域网 (Wi-Fi)")],-1),u={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.startWifi.html",target:"_blank",rel:"noopener noreferrer"},d={id:"小程序提供三种使用wifi能力的流程【文档连接】",tabindex:"-1"},k=n("a",{class:"header-anchor",href:"#小程序提供三种使用wifi能力的流程【文档连接】","aria-hidden":"true"},"#",-1),v={href:"https://developers.weixin.qq.com/miniprogram/dev/framework/device/wifi.html",target:"_blank",rel:"noopener noreferrer"},m={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.startWifi.html",target:"_blank",rel:"noopener noreferrer"},f={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.getWifiList.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onGetWifiList.html",target:"_blank",rel:"noopener noreferrer"},w=n("li",null,"根据以上动作获取到wifi数据后就可以根据不同业务要求去增加对应流程",-1),_=n("li",null,"在实际配网中，因为使用的设备不一样，不同系统获取wifi的条件也不同，需要考虑好对应不同设备的流程",-1),b=n("li",null,"Android 系统 6.0 以上版本，在没有打开定位开关的时候会导致设备不能正常获取周边的 Wi-Fi 信息。",-1),g={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.getWifiList.html",target:"_blank",rel:"noopener noreferrer"},W=n("h2",{id:"_1-连接指定-wi-fi-设备",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-连接指定-wi-fi-设备","aria-hidden":"true"},"#"),s(" 1. 连接指定 Wi-Fi 设备")],-1),x=n("p",null,"如果知道 Wi-Fi 设备名称和密码，并确认设备在附近，可以直接在小程序中连接指定 Wi-Fi。",-1),q=n("p",null,"接口调用时序为：",-1),y={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.startWifi.html",target:"_blank",rel:"noopener noreferrer"},L={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.connectWifi.html",target:"_blank",rel:"noopener noreferrer"},F={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onWifiConnected.html",target:"_blank",rel:"noopener noreferrer"},S=n("h2",{id:"_2-连接周边-wi-fi-设备",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-连接周边-wi-fi-设备","aria-hidden":"true"},"#"),s(" 2. 连接周边 Wi-Fi 设备")],-1),I=n("p",null,"小程序可以通过扫描附近的 Wi-Fi 设备，让用户选择某个设备进行连接。",-1),D=n("p",null,"由于系统限制，不同平台下接口调用时序有所差异：",-1),G=n("p",null,[n("strong",null,"Android")],-1),C={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.startWifi.html",target:"_blank",rel:"noopener noreferrer"},B={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.getWifiList.html",target:"_blank",rel:"noopener noreferrer"},N={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onGetWifiList.html",target:"_blank",rel:"noopener noreferrer"},O={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.connectWifi.html",target:"_blank",rel:"noopener noreferrer"},P={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onWifiConnected.html",target:"_blank",rel:"noopener noreferrer"},V=n("p",null,[n("strong",null,"iOS")],-1),A={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.startWifi.html",target:"_blank",rel:"noopener noreferrer"},E={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.getWifiList.html",target:"_blank",rel:"noopener noreferrer"},j={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onGetWifiList.html",target:"_blank",rel:"noopener noreferrer"},M={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.setWifiList.html",target:"_blank",rel:"noopener noreferrer"},T={href:"https://developers.weixin.qq.com/miniprogram/dev/api/device/wifi/wx.onWifiConnected.html",target:"_blank",rel:"noopener noreferrer"},R=c(`<h1 id="代码参考" tabindex="-1"><a class="header-anchor" href="#代码参考" aria-hidden="true">#</a> 代码参考</h1><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// distributionNetwork.ts</span>
<span class="token keyword">import</span> Dialog <span class="token keyword">from</span> <span class="token string">&#39;../../miniprogram_npm/@vant/weapp/dialog/dialog&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WifiInfoData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@ts/types/distributionNetworkTypes&#39;</span>

<span class="token keyword">interface</span> <span class="token class-name">PageData</span> <span class="token punctuation">{</span>
  wifiList<span class="token operator">:</span> WifiInfoData<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    wifiList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// wifi列表</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> PageData<span class="token punctuation">,</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">startWifi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token doc-comment comment">/** ============
   * = 初始化 Wi-Fi
  ============ */</span>
  <span class="token function">startWifi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">startWifi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;ios&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;mac&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>platform<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          Dialog<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">&#39;获取手机 Wi-Fi 列表&#39;</span><span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">&#39;IOS系统获取 Wi-Fi 列表，需要用户手动进入「无线局域网」设置页，并在系统扫描到设备后返回小程序才可获得 Wi-Fi 数据&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWifiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getWifiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token doc-comment comment">/** ============
   * = 请求wifi列表
  ============ */</span>
  <span class="token function">getWifiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">getWifiList</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onGetWifiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token doc-comment comment">/** ============
   * = 获取wifi列表
  ============ */</span>
  <span class="token function">onGetWifiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">onGetWifiList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> wifiList<span class="token operator">:</span> list <span class="token punctuation">}</span><span class="token operator">:</span> WechatMiniprogram<span class="token punctuation">.</span>OnGetWifiListListenerResult<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> wifiList<span class="token operator">:</span> WifiInfoData<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token operator">:</span> WifiInfoData<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">SSID</span><span class="token punctuation">,</span> <span class="token constant">BSSID</span><span class="token punctuation">,</span> frequency <span class="token punctuation">}</span><span class="token operator">:</span> WechatMiniprogram<span class="token punctuation">.</span>WifiInfo<span class="token punctuation">)</span><span class="token operator">:</span> WifiInfoData<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">SSID</span><span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">BSSID</span><span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token constant">SSID</span><span class="token punctuation">,</span> ssid<span class="token operator">:</span> <span class="token constant">SSID</span><span class="token punctuation">,</span> bssid<span class="token operator">:</span> <span class="token constant">BSSID</span><span class="token punctuation">,</span> frequency <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> prev
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> wifiList <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function z(H,J){const a=i("ExternalLinkIcon");return p(),o("div",null,[r,n("p",null,[s("在小程序中支持搜索周边的 Wi-Fi 设备，同时可以针对指定设备，传入密码发起连接。"),n("a",u,[s("微信开放文档 (qq.com)"),t(a)])]),n("h1",d,[k,s(" 小程序提供三种使用wifi能力的流程【"),n("a",v,[s("文档连接"),t(a)]),s("】")]),n("ul",null,[n("li",null,[s("在实际配网中，如果没有特殊的配网流程，我们只需要关注好 初始化wifi["),n("a",m,[s("startWifi"),t(a)]),s("]-> 获取wifi列表["),n("a",f,[s("getWifiList"),t(a)]),s("] -> 获取到wifi列表数据事件["),n("a",h,[s("onGetWifiList"),t(a)]),s("]")]),w,_,b,n("li",null,[s("Ios 系统，请求获取周边 Wi-Fi 列表接口["),n("a",g,[s("getWifiList"),t(a)]),s("]会跳转到系统设置中的微信设置页，需引导用户进入「无线局域网」设置页，手动连接设备")])]),W,x,q,n("ol",null,[n("li",null,[n("a",y,[s("startWifi"),t(a)]),s(": 初始化 Wi-Fi 模块")]),n("li",null,[n("a",L,[s("connectWifi"),t(a)]),s(": 连接 Wi-Fi（iOS 需 11 及以上版本支持）")]),n("li",null,[n("a",F,[s("onWifiConnected"),t(a)]),s(": 连接上 Wi-Fi 的事件回调")])]),S,I,D,G,n("ol",null,[n("li",null,[n("a",C,[s("startWifi"),t(a)]),s(": 初始化 Wi-Fi 模块")]),n("li",null,[n("a",B,[s("getWifiList"),t(a)]),s(": 请求获取周边 Wi-Fi 列表")]),n("li",null,[n("a",N,[s("onGetWifiList"),t(a)]),s(": 获取到 Wi-Fi 列表数据事件")]),n("li",null,[n("a",O,[s("connectWifi"),t(a)]),s(": 连接 Wi-Fi")]),n("li",null,[n("a",P,[s("onWifiConnected"),t(a)]),s(": 连接上 Wi-Fi 的事件回调")])]),V,n("ol",null,[n("li",null,[n("a",A,[s("startWifi"),t(a)]),s(": 初始化 Wi-Fi 模块")]),n("li",null,[n("a",E,[s("getWifiList"),t(a)]),s(": 请求获取周边 Wi-Fi 列表。本接口会跳转到系统设置中的微信设置页，需引导用户进入「无线局域网」设置页，手动连接设备。（iOS 11.0 及 11.1 版本因系统问题失效）")]),n("li",null,[n("a",j,[s("onGetWifiList"),t(a)]),s(": 获取到 Wi-Fi 列表数据事件")]),n("li",null,[n("a",M,[s("setWifiList"),t(a)]),s(": 设置 Wi-Fi 列表 中 AP 的相关信息，辅助用户进行连接")]),n("li",null,[n("a",T,[s("onWifiConnected"),t(a)]),s(": 连接上 Wi-Fi 的事件回调")])]),R])}const Q=e(l,[["render",z],["__file","wuxianjuyuwang.html.vue"]]);export{Q as default};
